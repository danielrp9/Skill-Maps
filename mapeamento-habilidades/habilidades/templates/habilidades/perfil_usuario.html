{% extends "habilidades/base.html" %}
{% load static %}

{% block title %}Perfil de {{ usuario.username|default:"Usu√°rio" }}{% endblock %}

{% block content %}
<main class="container mx-auto flex-1 p-4 lg:p-8 max-w-4xl">
    
    {% if messages %}
        <div class="w-full mb-4">
            {% for message in messages %}
                <div class="p-3 {% if message.tags == 'error' %}bg-red-200 text-red-800 border border-red-300{% elif message.tags == 'success' %}bg-green-200 text-green-800 border border-green-300{% endif %} rounded-lg text-sm font-medium">
                    {{ message }}
                </div>
            {% endfor %}
        </div>
    {% endif %}

    {% if usuario %}
    <div class="bg-card-light dark:bg-card-dark p-6 rounded-xl shadow-lg border border-border-light dark:border-border-dark">
        <div class="flex justify-between items-start mb-4">
            
            <div class="flex flex-col">
                <h1 class="text-3xl font-bold">Perfil de {{ usuario.username }}</h1>
                <p class="text-text-light/70 dark:text-text-dark/70 text-sm">Visualizando perfil. ID: {{ usuario.id }}</p>
            </div> 
            
            {% if is_current_user %}
                <a href="{% url 'habilidades:editar_perfil' %}" class="flex items-center justify-center gap-1 overflow-hidden rounded-lg h-10 px-4 bg-secondary text-white text-sm font-bold tracking-wide transition-colors hover:bg-secondary/80">
                    <span class="material-symbols-outlined text-xl">edit</span>
                    Editar Perfil
                </a>
            {% endif %}
            
        </div>
        
        <div class="flex items-center gap-4 mb-6">
            <div class="size-24 bg-gray-300 rounded-full flex items-center justify-center text-xl font-bold">
                {{ usuario.username|slice:":1"|upper }}
            </div>
            
            <div class="flex flex-col">
                <p class="text-lg font-semibold">{{ usuario.username }}</p>
                <p class="text-text-light/70 dark:text-text-dark/70">{{ usuario.email }}</p>
                <p class="text-sm mt-1">Campus: {{ usuario.campus }} / Curso: {{ usuario.curso }}</p>
            </div>
        </div>

        <h2 class="text-2xl font-bold mt-8 mb-3">Projetos Criados ({{ projetos_criados|length }})</h2>
        
        {% if projetos_criados %}
            <ul class="list-disc ml-6 space-y-2">
                {% for projeto in projetos_criados %}
                    <li>
                        <a href="{% url 'habilidades:detalhes_projeto' projeto_id=projeto.id %}" class="text-primary hover:underline">
                            {{ projeto.titulo }}
                        </a>
                        <span class="text-sm text-text-light/70 dark:text-text-dark/70"> (Status: {{ projeto.status }})</span>
                    </li>
                {% endfor %}
            </ul>
        {% else %}
            <p class="text-text-light/70 dark:text-text-dark/70">Nenhum projeto criado ainda.</p>
        {% endif %}
        
    </div>
    {% else %}
        <h1 class="text-3xl font-bold text-danger">Falha ao carregar perfil.</h1>
    {% endif %}

</main>
{% endblock %}