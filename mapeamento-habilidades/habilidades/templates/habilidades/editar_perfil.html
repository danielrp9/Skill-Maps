{% extends "habilidades/base.html" %}
{% load static %}

{% block title %}Editar Perfil - UFVJM SkillMap{% endblock %}

{% block content %}
<div class="px-4 md:px-10 lg:px-40 flex flex-1 justify-center py-5">
<div class="layout-content-container flex flex-col max-w-[960px] flex-1">

<header class="flex items-center justify-between whitespace-nowrap border-b border-solid border-border-light dark:border-border-dark px-4 sm:px-10 py-3">
    <div class="flex items-center gap-4 text-text-light dark:text-text-dark">
        <div class="size-6 text-primary">
            <svg fill="currentColor" viewbox="0 0 48 48" xmlns="http://www.w3.org/2000/svg">
            <path clip-rule="evenodd" d="M12.0799 24L4 19.2479L9.95537 8.75216L18.04 13.4961L18.0446 4H29.9554L29.96 13.4961L38.0446 8.75216L44 19.2479L35.92 24L44 28.7521L38.0446 39.2479L29.96 34.5039L29.9554 44H18.0446L18.04 34.5039L9.95537 39.2479L4 28.7521L12.0799 24Z" fill-rule="evenodd"></path>
            </svg>
        </div>
        <h2 class="text-lg font-bold leading-tight tracking-[-0.015em]">UFVJM SkillMap</h2>
    </div>
    <a href="{% url 'habilidades:perfil_usuario' usuario_id=request.session.user_id %}" class="flex items-center gap-2 text-primary font-bold text-sm hover:underline">
        <span class="material-symbols-outlined text-xl">arrow_back</span>
        Voltar para o Perfil
    </a>
</header>

<form method="post" action="{% url 'habilidades:editar_perfil' %}">
    {% csrf_token %}
<main class="flex flex-col gap-8 mt-8 px-4">
    
    <div class="flex flex-wrap justify-between gap-3">
        <p class="text-4xl font-black leading-tight tracking-[-0.033em] min-w-72">Editar Perfil</p>
    </div>
    
    {% if messages %}
        <div class="w-full mb-4">
        {% for message in messages %}
            <div class="p-3 {% if message.tags == 'error' %}bg-red-200 text-red-800 border border-red-300{% elif message.tags == 'success' %}bg-green-200 text-green-800 border border-green-300{% endif %} rounded-lg text-sm font-medium">
                {{ message }}
            </div>
        {% endfor %}
        </div>
    {% endif %}

    <div class="flex p-4 @container border border-border-light dark:border-border-dark rounded-xl bg-surface-light dark:bg-surface-dark">
        <div class="flex w-full flex-col gap-4 @[520px]:flex-row @[520px]:justify-between @[520px]:items-center">
            <div class="flex gap-4 items-center">
                <div class="relative">
                    <div class="bg-center bg-no-repeat aspect-square bg-cover rounded-full min-h-32 w-32" data-alt="User avatar" style='background-image: url("https://lh3.googleusercontent.com/aida-public/AB6AXuCI5Em27s_Cd7AH_RddI4VwPaizvUXXvj4QSNVIKLFuBlQLq1T7crZ465d9kdccZujWooYOncEfwpEXW9rl2u73QGaE1FUrSDsyko-M5IDKTAjOxS04lEMhGSwnkpfYqLO5vYjcnoygbN2-lMtISMlK0T-XvHYz4zKBAEuXSyqfNW8Embj_Pkc_6mdyafRNtJq6W7_tX9kvWN4jlfCuVwJce-PJgPipAMKZaenOv4Kp50ynOmF9bVTD022TLNZJjYn-pbXODZbRc4i0");'></div>
                    <button type="button" class="absolute bottom-1 right-1 flex items-center justify-center size-8 rounded-full bg-primary text-background-dark cursor-pointer">
                        <span class="material-symbols-outlined text-lg">edit</span>
                    </button>
                </div>
                <div class="flex flex-col justify-center">
                    <p class="text-[22px] font-bold leading-tight tracking-[-0.015em]">Alterar Foto</p>
                    <p class="text-base font-normal leading-normal text-muted-light dark:text-muted-dark">JPG ou PNG. Tamanho máximo de 5MB.</p>
                </div>
            </div>
            <button type="button" class="flex min-w-[84px] cursor-pointer items-center justify-center overflow-hidden rounded-lg h-10 px-4 bg-primary/20 dark:bg-primary/30 text-sm font-bold leading-normal tracking-[0.015em] w-full max-w-[480px] @[480px]:w-auto">
                <span class="truncate">Fazer Upload</span>
            </button>
        </div>
    </div>
    
    <div class="flex flex-col gap-6 border border-border-light dark:border-border-dark rounded-xl bg-surface-light dark:bg-surface-dark p-6">
        <h2 class="text-[22px] font-bold leading-tight tracking-[-0.015em] pb-3 border-b border-border-light dark:border-border-dark">Informações Pessoais</h2>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            
            <div class="flex flex-col">
                <label class="text-base font-medium leading-normal pb-2" for="{{ form.nome.id_for_label }}">{{ form.nome.label }}</label>
                {{ form.nome }}
                {% for error in form.nome.errors %}<p class="text-sm text-red-500 mt-1">{{ error }}</p>{% endfor %}
            </div>
            
            <div class="flex flex-col">
                <label class="text-base font-medium leading-normal pb-2" for="{{ form.curso.id_for_label }}">{{ form.curso.label }}</label>
                {{ form.curso }}
                {% for error in form.curso.errors %}<p class="text-sm text-red-500 mt-1">{{ error }}</p>{% endfor %}
            </div>
            
            <div class="flex flex-col">
                <label class="text-base font-medium leading-normal pb-2" for="{{ form.campus.id_for_label }}">{{ form.campus.label }}</label>
                {{ form.campus }}
                {% for error in form.campus.errors %}<p class="text-sm text-red-500 mt-1">{{ error }}</p>{% endfor %}
            </div>
            
            <div class="md:col-span-2 flex flex-col">
                <label class="text-base font-medium leading-normal pb-2" for="{{ form.biografia.id_for_label }}">{{ form.biografia.label }}</label>
                {{ form.biografia }}
                {% for error in form.biografia.errors %}<p class="text-sm text-red-500 mt-1">{{ error }}</p>{% endfor %}
            </div>

            <div class="flex flex-col">
                <label class="text-base font-medium leading-normal pb-2" for="{{ form.lattes_url.id_for_label }}">{{ form.lattes_url.label }}</label>
                {{ form.lattes_url }}
            </div>
            <div class="flex flex-col">
                <label class="text-base font-medium leading-normal pb-2" for="{{ form.linkedin_url.id_for_label }}">{{ form.linkedin_url.label }}</label>
                {{ form.linkedin_url }}
            </div>
        </div>
    </div>
    
    <div class="flex flex-col gap-6 border border-border-light dark:border-border-dark rounded-xl bg-surface-light dark:bg-surface-dark p-6">
        <h2 class="text-[22px] font-bold leading-tight tracking-[-0.015em] pb-3 border-b border-border-light dark:border-border-dark">Meios de Contato</h2>
        <div class="flex flex-col gap-6">
            
            <div class="flex flex-col sm:flex-row items-start sm:items-center gap-4 w-full">
                <div class="flex items-center gap-3 w-40">
                    <span class="material-symbols-outlined text-muted-light dark:text-muted-dark">mail</span>
                    <label class="text-base font-medium leading-normal">{{ form.email.label }}</label>
                </div>
                {{ form.email }} 
            </div>
            
            <div class="flex flex-col sm:flex-row items-start sm:items-center gap-4 w-full">
                <div class="flex items-center gap-3 w-40">
                    <span class="material-symbols-outlined text-muted-light dark:text-muted-dark">call</span>
                    <label class="text-base font-medium leading-normal">{{ form.whatsapp.label }}</label>
                </div>
                {{ form.whatsapp }}
            </div>
            
            <div class="flex flex-col sm:flex-row items-start sm:items-center gap-4 w-full">
                <div class="flex items-center gap-3 w-40">
                    <span class="material-symbols-outlined text-muted-light dark:text-muted-dark">account_circle</span>
                    <label class="text-base font-medium leading-normal">{{ form.discord.label }}</label>
                </div>
                {{ form.discord }}
            </div>

            <div class="flex flex-col sm:flex-row items-start sm:items-center gap-4 w-full">
                <div class="flex items-center gap-3 w-40">
                    <span class="material-symbols-outlined text-muted-light dark:text-muted-dark">send</span>
                    <label class="text-base font-medium leading-normal">{{ form.telegram.label }}</label>
                </div>
                {{ form.telegram }}
            </div>
            
        </div>
        <div class="pt-4 mt-4 border-t border-border-light dark:border-border-dark">
            <button type="button" class="flex items-center justify-center gap-2 text-primary font-bold text-sm">
                <span class="material-symbols-outlined">add_circle</span>
                <span>Adicionar Contato</span>
            </button>
        </div>
    </div>
    
    <div class="flex flex-col sm:flex-row items-center justify-end gap-4 py-5">
        <a href="{% url 'habilidades:perfil_usuario' usuario_id=request.session.user_id %}" class="flex min-w-[84px] cursor-pointer items-center justify-center overflow-hidden rounded-lg h-12 px-6 bg-transparent text-text-light dark:text-text-dark text-base font-bold leading-normal w-full sm:w-auto hover:bg-primary/10">
            <span class="truncate">Cancelar</span>
        </a>
        <button type="submit" class="flex min-w-[84px] cursor-pointer items-center justify-center overflow-hidden rounded-lg h-12 px-6 bg-primary text-background-dark text-base font-bold leading-normal w-full sm:w-auto">
            <span class="truncate">Salvar Alterações</span>
        </button>
    </div>
</main>
</form>

<style>
    /* Estilos baseados no seu template original, garantindo que o Django Forms seja estilizado */
    .form-input, .form-select, textarea {
        display: block;
        width: 100%;
        min-width: 0;
        padding: 15px; /* h-14 equivalent */
        background-color: transparent;
        border: 1px solid #cfe7d7; /* border-border-light */
        border-radius: 0.5rem; /* rounded-lg */
        color: #0d1b12; /* text-text-light */
        transition: border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;
    }
    
    .form-input:focus, textarea:focus, .form-select:focus {
        border-color: #13ec5b; /* primary color */
        box-shadow: 0 0 0 2px #13ec5b;
        outline: 0;
    }

    @media (prefers-color-scheme: dark) {
        .form-input, .form-select, textarea {
            background-color: #102216;
            border-color: #2a3f31;
            color: #e7f3eb;
        }
    }
    
    textarea {
        min-height: 100px;
    }
</style>
</div>
</div>
{% endblock content %}